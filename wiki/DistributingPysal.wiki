#summary How to build PySAL distributions

= Introduction =

This page explains how to build source and "binary" distributions of PySAL. 

= Source Distros =

The work of specifying files and folders to include in a PySAL source distribution has been done.  These things are specified in setup.py and MANIFEST.in.  To build a new source package, run {{{python setup.py sdist --formats=gztar,zip}}} to generate two source distributions. 

A good reference is http://docs.python.org/distutils/sourcedist.html

= Binary distros =

==Windows==
Build distribution installers for Windows on Windows machines to ensure that the proper dynamic libraries are included in the distributable.  On Windows, run {{{python setup.py bdist_wininst}}} to build a graphical installer. To build an installer in the Microsoft Installer format MSI (which is prettier but allows the user to install the package in the wrong place), run {{{python setup.py bdist --formats=msi}}}. 

==OS X Darwin==
To make a Mac OS X graphical installer, first install 'bdist_mpkg' from the Python Package Index using {{{easy_install bdist_mpkg}}} or {{{pip install bdist_mpkg}}}. Then, run {{{bdist_mpkg setup.py build}}}, which builds your package installer in the dist/ directory.  The mpkg will need to be modified to install to the correct location.  Edit {{{pysal*.mpkg/Contents/Info.plist}}} replacing the path under {{{IFRequirementDicts}}} which a generic System path such as, {{{/Library/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages}}}.  This will check that directory exists before installing.  Note that {{{Version/Current/lib/python2.6}}} is a work around to support both system python and EPD.  Next find and edit {{{pysal*.mpkg/Contents/Packages/pysal*.pkg/Contents/Info.plist}}}.  Change the value after {{{IFPkgFlagDefaultLocation}}} to point to {{{/Library/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages}}}  Next, convert that file (ending in ".mpkg") into a disk image suitable for distribution by executing the following command:
{{{hdiutil create -fs HFS+ -srcfolder pysal*.mpkg/ pysal-x.x.x-py2.X-macosx10.X.dmg}}}